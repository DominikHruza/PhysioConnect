<div class="register-form">
  <form  (ngSubmit)="onSubmit(registerForm)" #registerForm="ngForm">
    <app-alert
      *ngIf="resultMsg"
      [message]="resultMsg"
      [type]="type"
      (close)="onHandleAlert()"
    ></app-alert>
    <app-spinner *ngIf="(isLoading$ | async)?.isLoading"></app-spinner>
    <h2 class="text-center">Register</h2>
    <div class="form-group my-3">
      <input
        type="email"
        class="form-control"
        placeholder="Email"
        required="required"
        name="email"
        ngModel
        email
        #email="ngModel"
      >
      <span *ngIf="!email.valid && email.touched">Please enter a valid email</span>
    </div>
    <div class="form-group my-3">
      <input
        type="password"
        class="form-control"
        placeholder="Password"
        required="required"
        name="password"
        ngModel
        #password="ngModel"
      >
      <span *ngIf="!password.valid && password.touched">Please enter password</span>
    </div>
    <div class="form-group my-3">
      <input
        type="password"
        class="form-control"
        placeholder="Repeat password"
        required="required"
        name="confirmPassword"
        ngModel
        ngValidateEqual="password"
        #confirmPassword="ngModel"
      >
      <div *ngIf="(confirmPassword.dirty || confirmPassword.touched) && confirmPassword.invalid">
        <p class="warning-text" *ngIf="confirmPassword.hasError('notEqual') && password.valid">
          Passwords Don't Match
        </p>
      </div>
    </div>

    <div class="form-group my-3">
      <input
        type="text"
        class="form-control"
        placeholder="Enter registration code"
        required="required"
        name="regCode"
        ngModel
        #regCode="ngModel"
      >
      <span *ngIf="!regCode.valid && regCode.touched">Please enter code received in email</span>
    </div>
    <div class="form-group my-3 text-center">
      <button [disabled]="!registerForm.valid" type="submit" class="btn btn-primary btn-block">Submit</button>
      <div class="mt-3">
        <span class="psw">Account created? <a routerLink="/login">Login here</a></span>
      </div>
    </div>
  </form>
</div>
